<div class="update-container">
  <h1>Actualizar Perfil</h1>

  <form class="update-form" (ngSubmit)="actualizarPerfil()" #profileForm="ngForm">
    <!-- Nombre de Usuario -->
    <div class="form-group">
      <label for="username">Nombre de Usuario</label>
      <div class="input-container">
        <span class="icon">👤</span>
        <input
          type="text"
          id="username"
          [(ngModel)]="perfilDto.username"
          name="username"
          placeholder="Introduce tu nombre de usuario"
          class="form-control"
          required
          minlength="3"
          #usernameInput="ngModel"
        />
      </div>
      <span class="error-message" *ngIf="usernameInput.invalid && usernameInput.touched">
        El nombre de usuario es obligatorio y debe tener al menos 3 caracteres.
      </span>
    </div>

    <!-- Correo Electrónico -->
    <div class="form-group">
      <label for="gmail">Correo Electrónico (Gmail)</label>
      <div class="input-container">
        <span class="icon">📧</span>
        <input
          type="email"
          id="gmail"
          [(ngModel)]="perfilDto.gmail"
          name="gmail"
          placeholder="Introduce tu correo Gmail"
          class="form-control"
          required
          email
          #gmailInput="ngModel"
        />
      </div>
      <span class="error-message" *ngIf="gmailInput.invalid && gmailInput.touched">
        El correo electrónico es obligatorio y debe tener un formato válido.
      </span>
    </div>

    <!-- Nombre -->
    <div class="form-group">
      <label for="nombre">Nombre</label>
      <div class="input-container">
        <span class="icon">👤</span>
        <input
          type="text"
          id="nombre"
          [(ngModel)]="perfilDto.nombre"
          name="nombre"
          placeholder="Introduce tu nombre"
          class="form-control"
          required
          #nombreInput="ngModel"
        />
      </div>
      <span class="error-message" *ngIf="nombreInput.invalid && nombreInput.touched">
        El nombre es obligatorio.
      </span>
    </div>

    <!-- Primer Apellido y Segundo Apellido en una fila -->
    <div class="form-row">
      <div class="form-group form-half">
        <label for="primer_apellido">Primer Apellido</label>
        <div class="input-container">
          <span class="icon">📝</span>
          <input
            type="text"
            id="primer_apellido"
            [(ngModel)]="perfilDto.primerApellido"
            name="primerApellido"
            placeholder="Introduce tu primer apellido"
            class="form-control"
            required
            #primerApellidoInput="ngModel"
          />
        </div>
        <span class="error-message" *ngIf="primerApellidoInput.invalid && primerApellidoInput.touched">
          El primer apellido es obligatorio.
        </span>
      </div>

      <div class="form-group form-half">
        <label for="segundo_apellido">Segundo Apellido</label>
        <div class="input-container">
          <span class="icon">📝</span>
          <input
            type="text"
            id="segundo_apellido"
            [(ngModel)]="perfilDto.segundoApellido"
            name="segundoApellido"
            placeholder="Introduce tu segundo apellido"
            class="form-control"
            required
            #segundoApellidoInput="ngModel"
          />
        </div>
        <span class="error-message" *ngIf="segundoApellidoInput.invalid && segundoApellidoInput.touched">
          El segundo apellido es obligatorio.
        </span>
      </div>
    </div>

    <!-- Teléfono y CI en una fila -->
    <div class="form-row">
      <div class="form-group form-half">
        <label for="telefono">Teléfono</label>
        <div class="input-container">
          <span class="icon">📞</span>
          <input
            type="text"
            id="telefono"
            [(ngModel)]="perfilDto.telefono"
            name="telefono"
            placeholder="Introduce tu número de teléfono"
            class="form-control"
            required
            pattern="^[0-9]*$"
            minlength="7"
            #telefonoInput="ngModel"
          />
        </div>
        <span class="error-message" *ngIf="telefonoInput.invalid && telefonoInput.touched">
          El teléfono es obligatorio, debe contener solo números y tener al menos 7 caracteres.
        </span>
      </div>

      <div class="form-group form-half">
        <label for="ci">Cédula de Identidad (CI)</label>
        <div class="input-container">
          <span class="icon">🆔</span>
          <input
            type="text"
            id="ci"
            [(ngModel)]="perfilDto.ci"
            name="ci"
            placeholder="Introduce tu CI"
            class="form-control"
            required
            pattern="^[0-9]*$"
            #ciInput="ngModel"
          />
        </div>
        <span class="error-message" *ngIf="ciInput.invalid && ciInput.touched">
          El CI es obligatorio y debe contener solo números.
        </span>
      </div>
    </div>

    <!-- Imagen de Perfil -->
    <div class="form-group">
      <label for="imagen">Imagen de Perfil</label>
      <div class="input-container">
        <span class="icon">🖼️</span>
        <input type="file" id="imagen" (change)="onFileSelected($event)" class="form-control" accept=".jpg, .jpeg, .png" />
      </div>
      <span class="error-message" *ngIf="fileError">
        {{ fileError }}
      </span>
    </div>

    <!-- Botones de Actualizar y Cancelar -->
    <div class="form-buttons">
      <button type="submit" class="update-btn" (click)="profileForm.invalid">Actualizar Perfil <span class="icon">✔️</span></button>
      <button type="button" class="cancel-btn" (click)="cancelar()">Cancelar</button>
    </div>
  </form>
</div>
