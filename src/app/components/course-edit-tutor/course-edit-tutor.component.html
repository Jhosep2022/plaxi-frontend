<div class="course-form">
  <div class="header-container">
    <h2 class="header-title">Editar Curso</h2>
    <div class="header-icons">
      <button type="button" class="icon-btn check-btn" (click)="onSubmit()">
        <svg height="28" width="28" fill="currentColor" viewBox="0 0 24 24">
          <path d="M9 19L4 12l1.4-1.4L9 16.2l9.6-9.6L20 8l-11 11z"></path>
        </svg>
      </button>
      <button type="button" class="icon-btn close-btn" (click)="onCancel()">
        <svg height="28" width="28" fill="currentColor" viewBox="0 0 24 24">
          <path d="M19 6.4L17.6 5 12 10.6 6.4 5 5 6.4 10.6 12 5 17.6 6.4 19 12 13.4 17.6 19 19 17.6 13.4 12z"></path>
        </svg>
      </button>
    </div>
  </div>

  <form [formGroup]="courseForm" (ngSubmit)="onSubmit()">
    <div class="details-section">
      <div class="form-group input-group">
        <label for="nombre">Título del curso</label>
        <div class="input-wrapper">
          <input id="nombre" type="text" formControlName="nombre" placeholder="Título del curso">
        </div>
        <span *ngIf="courseForm.get('nombre')?.touched && courseForm.get('nombre')?.invalid" class="error-message">
          {{ getErrorMessage('nombre') }}
        </span>
      </div>

      <div class="form-group input-group">
        <label for="descripcion">Descripción</label>
        <div class="input-wrapper">
          <textarea id="descripcion" formControlName="descripcion" rows="2" placeholder="Breve descripción del curso"></textarea>
        </div>
        <span *ngIf="courseForm.get('descripcion')?.touched && courseForm.get('descripcion')?.invalid" class="error-message">
          {{ getErrorMessage('descripcion') }}
        </span>
      </div>

      <div class="form-group input-group">
        <label for="portada">Imagen de la Portada</label>
        <div class="input-wrapper">
          <input id="portada" type="file" (change)="onFileSelected($event)" accept=".jpg, .jpeg, .png" />
        </div>
        <span *ngIf="fileError" class="error-message">
          {{ fileError }}
        </span>
      </div>

      <div *ngIf="previewUrl" class="image-preview">
        <img [src]="previewUrl" alt="Vista previa de la imagen" class="preview-image" />
      </div>

      <div class="form-row">
        <div class="form-group input-group">
          <label for="dificultad">Dificultad</label>
          <div class="input-wrapper">
            <select id="dificultad" formControlName="dificultad">
              <option value="Beginner">Principiante</option>
              <option value="Intermediate">Intermedio</option>
              <option value="Advanced">Avanzado</option>
            </select>
          </div>
        </div>

        <div class="form-group input-group">
          <label for="estado">Estado del Curso</label>
          <div class="input-wrapper">
            <select id="estado" formControlName="estado">
              <option value="true">Activo</option>
              <option value="false">Inactivo</option>
            </select>
          </div>
        </div>
      </div>

      <div class="form-group input-group">
        <label for="Categoria_id_categoria">Categoría</label>
        <div class="input-wrapper">
          <select id="Categoria_id_categoria" formControlName="Categoria_id_categoria" class="form-control">
            <option *ngFor="let categoria of categorias" [value]="categoria.idCategoria">
              {{ categoria.nombre }}
            </option>
          </select>
        </div>
        <span *ngIf="courseForm.get('Categoria_id_categoria')?.touched && courseForm.get('Categoria_id_categoria')?.invalid" class="error-message">
          {{ getErrorMessage('Categoria_id_categoria') }}
        </span>
      </div>

    </div>
  </form>
</div>
